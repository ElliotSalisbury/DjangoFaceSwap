{% extends 'objctify/base.html' %}
{% load staticfiles %}


{% block head_block %}
    <script type="text/javascript" src="{% static 'js/carousel.js' %}"></script>
    <script type="text/javascript" src="{% static 'js/ua-parser.min.js' %}"></script>

    <script type="text/javascript" src="{% static 'js/math.min.js' %}"></script>
    <script type="text/javascript" src="{% static 'js/jquery-1.11.1.min.js' %}"></script>
    <script type="text/javascript" src="{% static 'js/msgpack.min.js' %}"></script>
    <script type="text/javascript" src="{% static 'js/bootstrap.min.js' %}"></script>

    <script type="text/javascript" src="{% static 'js/imagewarp/deformation.js' %}"></script>
    <script type="text/javascript" src="{% static 'js/imagewarp/interpolation.js' %}"></script>
    <script type="text/javascript" src="{% static 'js/imagewarp/point.js' %}"></script>
    <script type="text/javascript" src="{% static 'js/imagewarp/matrix22.js' %}"></script>

    <script type="text/javascript" src="{% static 'js/three.min.js' %}"></script>
    <script type="text/javascript" src="{% static 'js/3dview/OrbitControls.js' %}"></script>
    <script type="text/javascript" src="{% static 'js/3dview/3dview.js' %}"></script>
    <script type="text/javascript" src="{% static 'js/3dview/pca_model.js' %}"></script>
    <script>
        if (!String.prototype.includes) {
             String.prototype.includes = function() {
                 'use strict';
                 return String.prototype.indexOf.apply(this, arguments) !== -1;
             };
         }

        var parser = new UAParser();
        var browser = parser.getBrowser();

        //include the safari canvas resizing code
        if (browser.name.includes("Safari")) {
            var exif = document.createElement('script');
            exif.setAttribute('src',"{% static 'js/exif.ios.js' %}");
            document.head.appendChild(exif);

            var binaryajax = document.createElement('script');
            binaryajax.setAttribute('src',"{% static 'js/binaryajax.js' %}");
            document.head.appendChild(binaryajax);

            var canvasresize = document.createElement('script');
            canvasresize.setAttribute('src',"{% static 'js/canvasResize.js' %}");
            document.head.appendChild(canvasresize);
        }else{
            var exif = document.createElement('script');
            exif.setAttribute('src',"{% static 'js/exif.min.js' %}");
            document.head.appendChild(exif);

            var loadimage = document.createElement('script');
            loadimage.setAttribute('src',"{% static 'js/load-image.all.min.js' %}");
            document.head.appendChild(loadimage);
        }
    </script>
<style>
    body {
        overflow-x: hidden;
    }
    .scrolls-y {
        overflow-x: hidden;
        overflow-y: auto;
        white-space:nowrap
    }

    .modal-auto {
        width:auto;
        max-width:1200px;
    }
</style>
<script>
    var examples = [

		{result: {
			images: [{
				original: "{% static 'img/beautyisdataful/examples/0_1.jpg' %}",
				results: {"indexs": [2861, 2851, 2841, 2824, 2830, 2852, 2862, 2842, 4133, 4130, 4126, 4122, 4109, 4105, 4101, 4093, 4088, 4074, 4076, 4065, 4055, 4043, 4032, 4014, 3998, 3968, 3929, 3888, 3871, 3837, 3783, 3754, 3725, 3673, 3625, 3582, 3552, 3520, 3512, 3494, 3480, 3473, 3460, 3456, 3446, 3443, 3436, 3432, 3424, 3423, 3412, 3411, 3407, 3406, 3402, 2675, 2699, 2697, 2686, 2674, 2667, 2659, 2901, 2904, 2910, 2922, 2936, 2966, 3003, 3011, 3125, 3131, 3137, 3147, 3161, 3170, 3285, 3332, 3368, 3379, 3383, 3384, 2866, 495, 1337, 2193, 1309, 2915, 2990, 3071, 3243, 3318, 3361, 114, 669, 1945, 2483, 1285, 765, 1334], "rating": 6.88850218215887, "facefeatures": [-0.8719658255577087, -0.10467417538166046, -1.4812395572662354, 0.31516265869140625, -0.9749065041542053, 0.7869567275047302, 1.6927708387374878, -1.638275146484375, -0.000748753547668457, -1.2720952033996582, -1.3440639972686768, -0.16969895362854004, -0.86871737241745, -0.5265677571296692, -1.6890236139297485, 0.9790180325508118, 1.4092813730239868, 0.7768834233283997, -0.265394926071167, -0.007685755379498005, 1.0109926462173462, 0.041600048542022705, 0.29680028557777405, 0.2327384054660797, 1.1092748641967773, -0.30761030316352844, -0.53045654296875, -0.9725610613822937, -0.6551334857940674, -1.1861778497695923, -0.3199816048145294, 0.6038519740104675, -0.5285570621490479, 0.34764349460601807, 0.5717535018920898, -1.1739989519119263, 0.5750460028648376, 0.5382293462753296, -0.07147236168384552, -0.7052932977676392, 0.02328336611390114, -1.0408151149749756, -0.9727623462677002, 0.7687774896621704, -0.5015257596969604, -0.2698433995246887, -0.5463820099830627, 0.4124720096588135, -0.9123091697692871, 0.1493329256772995, -0.8821275234222412, 0.17787989974021912, 1.0411181449890137, -0.19425030052661896, 1.3073636293411255, 0.8896533250808716, 0.01439329981803894, -0.004130233079195023, -0.07116997241973877, 0.06621786952018738, -0.5175538659095764, -0.318814218044281, 0.19974130392074585, 0.26086363196372986, -0.005181759595870972, -0.41103407740592957, -0.7667686939239502, 0.16881507635116577, -0.013110004365444183, 0.4349703788757324, 0.14961203932762146, 0.4701567590236664, 0.043573036789894104, 0.24722227454185486, -0.3230856657028198, 0.2568952143192291, 0.29076915979385376, -0.3962627947330475, 0.5040155053138733, 0.08205316215753555, -0.5623850226402283, 0.145522803068161, 0.4749295115470886, -0.04458596557378769, 0.3719349801540375, -0.646183967590332, -0.25174054503440857, 0.08976759016513824, -0.17271794378757477, 0.5409133434295654, 0.23120246827602386, 0.27875036001205444, 0.789700984954834, -0.48950767517089844, 0.2743869423866272, -0.3572900891304016, 0.13570259511470795, -0.02285665273666382, 0.14538007974624634], "new_facefeatures": [-1.431121852934844, 1.1126691977230159, -2.0887804971878037, -0.8110619077721224, -0.7513152506301338, 1.3897893483607913, 1.4353590487153347, -1.0977209941953565, -0.264950052929932, -1.4637966013553505, -0.9190622888436402, 0.054254460129567646, -1.094208236983354, -0.9812167431783564, -2.4694724818051936, 0.48788718017839106, 1.6007508357403708, 0.6244047588983199, -1.102931418108256, 0.19814968136016797, 0.5518528128723794, -0.604129749586924, 0.7812240742421942, -0.7658892636175262, 1.3205736075645262, -0.5971614217988214, -0.08533809295054029, -0.6138368255256162, -1.6275867492297942, -0.6856078093105886, 0.15862144655475174, -1.0289318405701215, -1.002857140435346, 0.10198323585899716, -0.16632038744329497, -0.3265491255770879, 0.09361427383311932, 0.230848951308703, 0.6682641482663813, -0.43027697564766515, 1.036158575442184, -0.6530810282292594, -0.6171389352527663, 0.958441941602601, 0.24992964371625775, 0.009170431916451373, -0.6997018021755276, 0.10692272039069213, -0.7082489029264519, -0.11639621058133869, -1.4804020900791643, -0.5699281160850561, 2.1436961418091354, -1.3674519472146263, 2.0770486237843504, 1.1351291909691967, 0.0048225252217787215, -0.701925226947702, -0.058542490651349983, 0.9981618836928764, 0.35767238693373893, 0.29636314436324723, 0.9675295184212239, -0.5307058127909831, 0.3811949697257221, 0.19456943700980975, -0.8438265353453435, 0.7120353374703818, -0.4228640117597488, 0.3477629646576061, 0.9244129847127541, -0.24508575201438157, 0.4947963447970489, -0.724578827076596, -0.09839189073449607, -0.5272722184444614, -0.8115477127690996, 0.5128630686681528, 2.018784296725557, 0.26718566308382014, -0.5774004179925224, 0.8176001494197804, -0.8087405711736032, 0.562848954300599, 1.5390231075115537, -1.6962185065363928, -0.2414221478680211, -0.47033168164889544, 0.17463570558556876, -0.13128294043059976, 0.359873614026259, -0.08487307984295128, 1.2646322102545944, -1.6795999153601493, 0.551788052972491, -0.10998850415446652, 0.11818424676895248, 0.9428172376018488, -0.07661417117762319], "modelview": [[0.9984882473945618, -0.04306723177433014, -0.034152597188949585, 93.10059356689453], [0.042915813624858856, 0.9990653991699219, -0.005154607817530632, 92.98694610595703], [0.03434266895055771, 0.0036811288446187973, 0.9994033575057983, 0.0], [0.0, 0.0, 0.0, 1.0]], "projection": [[0.01127040944993496, 0.0, 0.0, -1.0], [0.0, 0.009157207794487476, 0.0, -1.0], [0.0, 0.0, -1.0, 0.0], [0.0, 0.0, 0.0, 1.0]], "viewport": [0, 256, 208, -256]}
			}]
		}},

		{result: {
			images: [{
				original: "{% static 'img/beautyisdataful/examples/1_1.jpg' %}",
				results: {"indexs": [2861, 2851, 2830, 2852, 2862, 2842, 4133, 4130, 4126, 4122, 4114, 4109, 4105, 4101, 4093, 4088, 4074, 4076, 4069, 4065, 4055, 4043, 4014, 3998, 3968, 3929, 3888, 3871, 3837, 3783, 3754, 3725, 3673, 3625, 3582, 3552, 3520, 3512, 3494, 3480, 3473, 3460, 3456, 3446, 3443, 3436, 3432, 3424, 3423, 3412, 3411, 3407, 3406, 3402, 3398, 2675, 2699, 2682, 2667, 2659, 2652, 2901, 2904, 2910, 2922, 2936, 2966, 3011, 3083, 3111, 3125, 3131, 3137, 3147, 3161, 3170, 3177, 3214, 3285, 3332, 3368, 3379, 3383, 3384, 2866, 2850, 495, 1337, 2193, 1309, 2915, 2990, 3071, 3243, 3318, 3361, 114, 669, 1945, 2483, 1285, 765, 1334], "rating": 5.855862076898721, "facefeatures": [-1.0985389947891235, -0.6618104577064514, -0.17767655849456787, 0.2121124118566513, -0.41063812375068665, 0.6436740756034851, 1.1563329696655273, -0.9437417984008789, -1.0263428688049316, -1.7665988206863403, -2.605286121368408, -0.4707297682762146, -1.2066116333007812, -0.4280734062194824, -1.795065999031067, 0.7124353647232056, 0.6940357089042664, 0.07230937480926514, -0.28302767872810364, 0.5036553740501404, 0.35780978202819824, -0.44916993379592896, 0.12663930654525757, 0.6095377802848816, 1.457135796546936, -0.1868654489517212, -0.6600490808486938, -0.1697741001844406, -0.9213260412216187, -0.9512888193130493, 0.36012396216392517, -0.09475994110107422, -0.902542233467102, 1.2371938228607178, 0.7009992003440857, -0.2243964672088623, 0.27199533581733704, -0.5235258936882019, 0.12522272765636444, -1.597085952758789, 0.05685199052095413, -0.826942503452301, -1.0321029424667358, 0.26231008768081665, 0.1846914440393448, -0.0936993956565857, 0.29396554827690125, 0.011078596115112305, -0.3019925057888031, -0.773984968662262, -0.9758263230323792, -0.3530315160751343, 0.3355618715286255, 0.13568377494812012, 0.2451639175415039, 0.39144963026046753, 0.24773314595222473, -0.763800859451294, -0.0418795645236969, 0.07224597781896591, -0.9408828616142273, -1.0783193111419678, 0.48512643575668335, 0.3697749972343445, -0.4101605713367462, -1.1484088897705078, -0.6968212127685547, -0.07786992192268372, -0.09544247388839722, 1.0979012250900269, -0.2570313513278961, -0.10270793735980988, -0.012474708259105682, -0.1740269660949707, -0.25869178771972656, -0.41063565015792847, -0.1285056173801422, 0.09699678421020508, 0.5330158472061157, 0.378046452999115, -0.8503566384315491, 0.8573803901672363, 0.18889500200748444, 0.29196032881736755, -0.07929476350545883, -0.5350961685180664, 0.050159573554992676, 0.18187084794044495, -0.1299477517604828, 0.28325355052948, 0.22456014156341553, 0.413850873708725, 0.5118678212165833, -0.3517068326473236, 0.3913467526435852, 0.5768237113952637, -0.35613614320755005, 0.7486399412155151, -0.007573474198579788], "new_facefeatures": [-1.6926669817099593, 0.10783646151362714, -0.5889337281667747, -0.8238036732210812, -0.420145363026063, 1.1651037954502315, 0.37734487515634496, -0.006300686342126452, -0.9340631545534386, -3.236209270038457, -2.5941233558207446, -0.2666418453659285, -0.4410160270905234, -0.30240758942480456, -1.7317841465507244, 0.6962076718733298, 0.7291013105780666, -0.029837752908105284, -2.2489895993991205, -0.3110423298350936, 0.03947483379104411, 0.12548776735830847, -0.15889140819229902, -0.24859252197421344, 0.772423949741875, -1.4812219406212495, -0.6831987766450054, 0.24089511573370884, -1.3656465925251284, -0.38872604547037426, -0.044336620004694904, -0.6191489238116655, -1.3292958568303976, 0.7835276718984838, 0.3217517084865368, -0.7551043939206551, 0.6228355895857216, -0.6196956404637743, 0.4738951062956003, -1.292956659526679, 1.644067587555013, -0.9961694129340462, -0.9344851956847446, -0.5257953329613179, 0.580514100871511, -1.1368893272114495, 0.6703296771744243, -0.8072966966152144, -0.6924094871885312, -0.7569069558103603, -1.1748522654427402, -0.1245662106364126, 1.7927980155504997, 0.5617126920795161, 0.45174917609298987, 0.5736711987274488, -0.48591478714748715, -1.2249863100662493, -0.09528715012907749, 0.33727133035133394, -0.5870938183127927, -2.305452952834832, -0.12239397167675657, -0.1881111747735677, 1.270221010757409, -1.047966811235004, 0.03464224367666241, -0.7310481882134386, -0.35073038843732607, 0.9529315923885803, 0.7448759664910375, -0.6200839794630187, -0.17001008279580543, -0.9177380025568452, 0.06844019290789702, -0.6240864347212594, -1.4168802931642062, 0.1479072250290802, 0.9227321090455008, 1.4314033141129883, -1.1548698193032856, 0.29974084592246286, 0.3763367514683169, 0.154866290671583, 0.4247592355148847, -0.056003686522337656, 1.1029587811062405, 1.1014056538462011, 0.26945342792119575, 1.2841658369510023, -0.5451224842862796, 1.6981281023812347, 1.5985206201974038, -0.21701525782379794, 0.7111094302367981, 0.9898595274665933, 1.4913872900315581, 1.121697300968763, -1.2371661601890729], "modelview": [[0.9981691837310791, -0.06048281490802765, -0.0003424363676458597, 83.7273941040039], [0.060463882982730865, 0.9976794719696045, 0.03130170702934265, 76.4298095703125], [-0.0015515738632529974, -0.031265102326869965, 0.9995099306106567, 0.0], [0.0, 0.0, 0.0, 1.0]], "projection": [[0.012151887640357018, 0.0, 0.0, -1.0], [0.0, 0.009873409755527973, 0.0, -1.0], [0.0, 0.0, -1.0, 0.0], [0.0, 0.0, 0.0, 1.0]], "viewport": [0, 256, 208, -256]}
			}]
		}},

		{result: {
			images: [{
				original: "{% static 'img/beautyisdataful/examples/7_1.jpg' %}",
				results: {"indexs": [2808, 2770, 2802, 2803, 2824, 2830, 2825, 2862, 4133, 4132, 4130, 4126, 4122, 4114, 4112, 4108, 4105, 4100, 4092, 4093, 4087, 4084, 4074, 4075, 4076, 4069, 4048, 4042, 4025, 4011, 3996, 3997, 3966, 4007, 3967, 3998, 3975, 3976, 3968, 3942, 3929, 3888, 3871, 3837, 3783, 3754, 3725, 3673, 3625, 3582, 3520, 3512, 3494, 3480, 3473, 3460, 3456, 3446, 3443, 3436, 3432, 3424, 3423, 3411, 3407, 3406, 3402, 2675, 2699, 2697, 2686, 2674, 2667, 2659, 2901, 2904, 2910, 2922, 2936, 2966, 3011, 3083, 3111, 3125, 3131, 3137, 3147, 3161, 3170, 3177, 3214, 3285, 3332, 3344, 3368, 3379, 3383, 2847, 2849, 495, 1337, 2193, 1309, 2915, 2990, 3071, 3243, 3318, 3361, 114, 669, 1945, 2483, 1285, 765, 1334], "rating": 5.595062526975564, "facefeatures": [-0.9910979270935059, -0.09472876787185669, -0.8234633207321167, -0.9576709866523743, -0.06520068645477295, 0.3124938905239105, 1.804264783859253, -1.205083966255188, -0.9249412417411804, -1.674786925315857, -2.707305908203125, -0.646654486656189, -0.11597299575805664, 0.7894122004508972, -1.069117784500122, 0.6665892601013184, 1.2710076570510864, 0.6801633834838867, 0.007533013820648193, 0.0811692625284195, -0.6842275261878967, -0.39407777786254883, 1.3059780597686768, 0.43126150965690613, 1.3402774333953857, -1.0192841291427612, -1.356915831565857, -0.11484196782112122, -0.4108356833457947, -0.8060408234596252, 0.08696835488080978, -0.12773185968399048, -0.5944390296936035, 0.7195678949356079, 0.01944880187511444, -1.4621334075927734, 0.34584754705429077, -0.0988556444644928, 0.07466170191764832, -0.6840920448303223, -0.4693719148635864, -1.1700716018676758, -0.18546795845031738, 1.1052192449569702, -0.4713281989097595, -0.17314139008522034, -0.15406933426856995, 0.5941682457923889, -0.7291157841682434, -0.2920960783958435, -0.8413950204849243, 0.48941513895988464, 1.4557216167449951, -0.12041811645030975, 1.1583521366119385, 0.8512462377548218, 0.5846595168113708, 0.21647685766220093, -0.052783071994781494, -0.02054174244403839, -0.590030312538147, -0.0217779278755188, 0.5816725492477417, 0.4274054765701294, -0.7173138856887817, -0.3976801633834839, -0.2951802909374237, 0.3390645384788513, -0.1440812200307846, 0.5283075571060181, -0.07574400305747986, 0.2164916843175888, -0.26996657252311707, -0.3715631365776062, -0.10755141079425812, 0.056354083120822906, -0.02733248472213745, -0.8483636379241943, 0.36350953578948975, 0.019645169377326965, -0.5081391334533691, 0.22058996558189392, 0.3737845718860626, -0.4451592266559601, -0.11431635171175003, -0.5933022499084473, -0.15219663083553314, 0.1626734733581543, 0.07904832065105438, 0.2607661485671997, 0.2758220434188843, 0.24788999557495117, 0.5060721635818481, -0.5242844820022583, -0.008958190679550171, 0.20680958032608032, -0.2530564069747925, -0.04662550985813141, 0.18609948456287384], "new_facefeatures": [-1.3515434358965508, 0.7608558022082436, -1.8493872313936275, -0.8325847082709888, -0.6264889287611043, 1.158700911403011, 1.4844896264019456, -1.241201324146239, -0.24833805632971429, -1.55265768629175, -1.1741075954100908, -0.18687555827135557, -1.053759263382803, -0.7046948129837518, -2.244911287086961, 0.3655669230078155, 1.8070287560757827, 0.2936101915535274, -0.8826927267656751, 0.22291394627773814, 0.25838855476457795, -0.8765472183064296, 0.7521955252445314, -0.7253510846713472, 1.3501065187640515, -0.48823175833595844, -0.41458802516199844, -0.3392492780778549, -1.109048041619331, -0.5775341216697065, 0.15939780817871088, -1.0797406911608807, -1.0663381844570166, -0.06999641267014478, 0.1778724498370797, -0.2638826233948265, 0.10480596100861835, 0.006194181593135353, 0.9337359885019066, -0.6537347488602405, 0.9369701068078545, -0.6593069043725409, -0.4358501236591283, 0.9240347178052418, 0.2601617325025792, -0.09614647657916382, -0.5667550619465717, 0.4298430488374675, -0.5751232361575269, -0.28387980873840013, -1.6427540523532456, -0.5652863881491528, 2.205526083064292, -1.4922640462738817, 2.1427052965088413, 1.1479813642220262, 0.13218569503281685, -0.8026762806759843, -0.18983747265219636, 0.8234974585993108, 0.45558280465855583, 0.3707223803590639, 0.762116481138132, -0.32155407597588115, 0.4047648733554336, 0.2237182338179863, -0.8971859717720705, 0.9453160892463076, -0.2839337395632618, 0.6882760667348292, 0.9116900262291575, -0.06357581683949103, 0.5560771711005638, -0.6109012894345516, 0.007275066894282393, -0.3972543382406582, -0.8303957955401299, 0.6899099166699656, 2.1337323734997233, 0.18819651924870154, -0.5869792489033885, 0.9517970172755229, -0.8020537507866313, 0.5801620594485929, 1.5439958527815731, -1.6242706427847833, -0.2923226648136142, -0.5378753895345546, 0.02185835040008742, -0.15621056884473986, 0.3852352598315038, -0.12179372780193924, 1.31505746573826, -1.6646985223567012, 0.44677466052863185, -0.12911073264912498, 0.15544050182493166, 0.8428586811183668, -0.1252422779303136], "modelview": [[0.9474970102310181, -0.03912275657057762, 0.3173622190952301, 88.91413879394531], [0.00841448176652193, 0.9951940178871155, 0.09756055474281311, 80.88029479980469], [-0.31965383887290955, -0.08976790308952332, 0.943272590637207, 0.0], [0.0, 0.0, 0.0, 1.0]], "projection": [[0.01116812415421009, 0.0, 0.0, -1.0], [0.0, 0.008768722414970398, 0.0, -1.0], [0.0, 0.0, -1.0, 0.0], [0.0, 0.0, 0.0, 1.0]], "viewport": [0, 256, 201, -256]}
			}]
		}},

		{result: {
			images: [{
				original: "{% static 'img/beautyisdataful/examples/8_1.jpg' %}",
				results: {"indexs": [2866, 2850, 2861, 2851, 2841, 2824, 2830, 2852, 2862, 4133, 4130, 4126, 4122, 4114, 4109, 4105, 4101, 4092, 4088, 4084, 4068, 4060, 4041, 4024, 4005, 4010, 3995, 3985, 3962, 3924, 3897, 3865, 3816, 3815, 3795, 3776, 3748, 3721, 3667, 3651, 3618, 3578, 3569, 3546, 3501, 3484, 3458, 3432, 3424, 3423, 3415, 3412, 3411, 3406, 3402, 3401, 2675, 2699, 2697, 2686, 2674, 2682, 2667, 2666, 2659, 2901, 2904, 2910, 2922, 2936, 2966, 3011, 3285, 3332, 3379, 3383, 3384, 495, 1337, 2193, 1309, 2915, 2990, 3071, 3243, 3318, 3361, 114, 669, 1945, 2483, 1285, 765, 1334], "rating": 7.520726540026254, "facefeatures": [-1.3088445663452148, -0.33606502413749695, 0.06396496295928955, -0.3164413571357727, -0.26894572377204895, 1.116941213607788, 0.2820855975151062, -0.29011160135269165, -0.13283976912498474, -0.7839877605438232, -1.5620863437652588, 0.6256059408187866, -1.398775577545166, 0.7877615690231323, -2.5993711948394775, 1.6121703386306763, 1.2797815799713135, 0.15703989565372467, -2.413801908493042, 0.6113165616989136, -0.5611921548843384, -0.40670379996299744, 0.5810387134552002, -0.1274518221616745, 1.8472511768341064, -0.6602259874343872, -0.05135902762413025, -0.7120541334152222, -1.011840581893921, -0.6526198387145996, 0.3778773844242096, -0.3722063899040222, -0.7655689120292664, 1.2316572666168213, 0.25260695815086365, -0.5830890536308289, 0.351972371339798, -0.6736577749252319, -0.0831519216299057, -0.31049230694770813, 0.5794093012809753, 0.010300368070602417, -0.7214176654815674, 0.05469091236591339, 0.6950217485427856, -0.31128764152526855, 0.025443419814109802, 0.3540981411933899, -0.10600325465202332, -1.035765290260315, -0.704460859298706, 0.4707733988761902, 0.26688408851623535, 1.3154067993164062, 0.22072216868400574, -0.14452612400054932, -0.03219577670097351, 0.5379590392112732, 0.03130485117435455, 0.5933963060379028, -0.4435657858848572, -1.1456124782562256, 1.1132919788360596, 0.030975401401519775, -0.2119273692369461, -0.6141782999038696, -0.5303269624710083, 0.06833851337432861, -0.3424658179283142, 1.1347671747207642, 0.8417823314666748, 0.3959556818008423, -0.5365809202194214, -0.17303696274757385, -0.10343331098556519, -0.13515740633010864, -0.04508895054459572, 0.09114299714565277, 0.8934391736984253, 0.4731472134590149, -0.7901507616043091, 0.7756754755973816, 0.3750791847705841, 0.2121737003326416, -0.12847724556922913, -0.626307487487793, 0.06247942894697189, 0.5320613384246826, 0.42000651359558105, 0.34458011388778687, 0.11667753756046295, 0.5679557919502258, 0.5259068012237549, -0.40137583017349243, 0.05300547182559967, 0.6520121693611145, 0.3476642668247223, 0.441336065530777, -0.053181763738393784], "new_facefeatures": [-1.658441685720288, 0.10079196000323125, -0.5829086459367041, -1.1192866787576092, -0.2461828396494422, 1.0190456888755584, -0.09130395952500105, -0.05779707751148902, -0.6370456754034177, -2.5619488265509642, -2.253894149343414, 0.18207060359608201, -0.6386129743713045, 0.734174491775243, -2.2070812056305864, 0.9945395584598276, 1.1606278225905338, -0.12840751808089457, -3.14633387950113, 0.05997831552912995, -0.15513161824524946, 0.004350093911704031, 0.07364794581938362, -0.4463470802560011, 1.0080061190591572, -1.561712296942723, -0.3633922303611957, 0.34962367134845157, -1.5123670565070026, -0.08176141214186244, 0.06275250609769864, -0.5953277769475986, -1.1272955113751457, 0.7056641839100848, 0.3635575300317425, -0.9701797098559134, 0.5221220121615772, -0.8937183880446284, 0.6981281001020808, -0.4959215092639546, 1.6234394379604364, -0.48029153677103864, -0.5903357457160782, -0.7881094679574663, 0.9271871036326925, -1.1490211694958021, 0.3670130556605429, -0.41497869029540774, -0.54707674237596, -0.9142058233134008, -1.1913569902452992, 0.43154441711495295, 1.4527656033058862, 1.0862662409788717, 0.46463079603923085, 0.1225892167040511, -0.5431595389433228, -0.7220987452437476, -0.13996846684080647, 0.5287899424149174, -0.03349180201767933, -2.284253496867894, 0.11873665478341808, -0.2122417862602341, 1.2430648074352955, -0.6357731574999825, 0.055004114994964395, -0.5885963055588599, -0.5149928772508383, 0.9122274251974662, 1.2871797811498558, -0.1692208691225276, -0.36749998780386, -0.8469720122226294, 0.24391651461338223, -0.18342920295749415, -1.21097949008701, 0.1591374539721502, 1.0366360086396817, 1.3439241896286243, -1.163344533157292, 0.42673793391680437, 0.43308454796765605, 0.2621367060330482, 0.3232931311975733, -0.24392166359622713, 1.0835270020821584, 1.2929936424338773, 0.43298489438716903, 1.3259495999699125, -0.47363263716368864, 1.6485790027077019, 1.6936660811922524, -0.2048379788874856, 0.4741629086478612, 1.0166176943750544, 1.7450123858941016, 0.8444791356045842, -1.2893498200915605], "modelview": [[0.9978370666503906, -0.030629150569438934, -0.05816414952278137, 91.78392791748047], [0.008076705038547516, 0.9352357387542725, -0.3539334833621979, 105.41698455810547], [0.0652378723025322, 0.3526981770992279, 0.9334602355957031, 0.0], [0.0, 0.0, 0.0, 1.0]], "projection": [[0.010727202519774437, 0.0, 0.0, -1.0], [0.0, 0.009470108896493912, 0.0, -1.0], [0.0, 0.0, -1.0, 0.0], [0.0, 0.0, 0.0, 1.0]], "viewport": [0, 256, 226, -256]}
			}]
		}},

		{result: {
			images: [{
				original: "{% static 'img/beautyisdataful/examples/22_1.jpg' %}",
				results: {"indexs": [2861, 2841, 2830, 2852, 2862, 2842, 4133, 4130, 4126, 4122, 4109, 4105, 4101, 4093, 4088, 4074, 4076, 4065, 4055, 4043, 4014, 3998, 3968, 3929, 3888, 3871, 3837, 3783, 3754, 3725, 3673, 3625, 3582, 3552, 3520, 3512, 3494, 3480, 3473, 3460, 3456, 3446, 3443, 3436, 3432, 3424, 3423, 3412, 3411, 3406, 3402, 3398, 2675, 2699, 2697, 2686, 2682, 2667, 2666, 2659, 2901, 2904, 2910, 2922, 2936, 2951, 2966, 3011, 3083, 3107, 3111, 3125, 3131, 3137, 3147, 3161, 3170, 3177, 3194, 3214, 3285, 3332, 3368, 3379, 3383, 3384, 2866, 495, 1337, 2193, 1309, 2915, 2990, 3071, 3243, 3318, 3361, 114, 669, 1945, 2483, 1285, 765, 1334], "rating": 6.80971760225615, "facefeatures": [-0.8900113105773926, -0.024254299700260162, -0.9835566282272339, -0.5677309632301331, -0.41585418581962585, 0.2153344452381134, 1.4979655742645264, -1.2964332103729248, -0.6726517677307129, -1.6866986751556396, -2.4666476249694824, -0.4894043803215027, -0.3167138695716858, 0.3951932191848755, -1.2134758234024048, 0.621148943901062, 1.6689780950546265, 0.28860360383987427, -0.23047813773155212, -0.2540612518787384, -0.17213180661201477, -0.24534322321414948, 1.4665391445159912, 0.7705912590026855, 1.2202222347259521, -0.45798152685165405, -0.6328041553497314, 0.15853315591812134, -0.02122315764427185, -0.6344659328460693, 0.26360467076301575, -0.10984809696674347, -0.57315993309021, 0.3001200258731842, 0.0560605451464653, -1.4942659139633179, 0.0696878433227539, 0.0947190374135971, 0.10814648866653442, -0.7487971782684326, -0.3696857690811157, -1.1491625308990479, 0.1301378309726715, 0.8809159994125366, -0.08923734724521637, -0.06789681315422058, 0.11398109793663025, 0.7244736552238464, -0.6135439872741699, -0.08543158322572708, -1.0992395877838135, 0.3501308858394623, 1.6004694700241089, -0.29827171564102173, 1.3974640369415283, 0.657530665397644, 0.31450051069259644, -0.08956567943096161, 0.06609006226062775, -0.3363175690174103, -0.687282919883728, -0.46779733896255493, 0.4417753517627716, 0.3740912079811096, -0.3773818016052246, -0.4888107180595398, -0.3598572015762329, 0.44397103786468506, -0.3609660863876343, 0.8246027231216431, -0.036946654319763184, 0.6763869524002075, -0.06243244558572769, 0.21794389188289642, 0.0974179208278656, 0.43434685468673706, -0.08603808283805847, -0.5588865876197815, 0.7041458487510681, 0.09697908163070679, -0.4055160880088806, 0.4624880254268646, 0.5652915239334106, -0.33063802123069763, 0.18236221373081207, -0.7065648436546326, -0.2801843583583832, -0.1178944855928421, -0.11381620168685913, 0.3742383122444153, -0.10536563396453857, 0.1843900978565216, 0.6315184831619263, -0.7691391706466675, 0.2562106251716614, 0.03288017213344574, -0.22774314880371094, 0.09852813184261322, -0.1464029997587204], "new_facefeatures": [-1.3505298238265386, 0.8447794376767762, -1.8834927321838022, -0.9038510710771699, -0.5485404053886133, 1.2413050918527386, 1.5069855863689374, -1.2046450480712327, -0.13363702781941358, -1.5579517648003036, -1.086729875673888, -0.19139203195213808, -1.0307583372054854, -0.6272227052996827, -2.2525749685738856, 0.3312949291303927, 1.7591243378291292, 0.36368456194200804, -0.8901916943944714, 0.2578096016342533, 0.29076740670704093, -0.8731923776048809, 0.7252490862821583, -0.7934415243991866, 1.2931785538160028, -0.5141684685142711, -0.461087007986668, -0.3932529541701338, -1.1591801298158932, -0.551255599358729, 0.13082970709512248, -1.075812341614861, -1.061596204876457, -0.07472014995108765, 0.1770810375126034, -0.2409693961988133, 0.16838778322634507, -0.013072745305872997, 1.0027970866525977, -0.6040499158535552, 0.9719437241514317, -0.619211953098023, -0.48027809501337093, 0.9107517395998433, 0.2586943551775108, -0.09432687710844335, -0.6221564484747163, 0.4291398546373868, -0.5886157474488034, -0.24700208157371575, -1.6554798724481286, -0.581128580907063, 2.142907129243334, -1.4618864795367552, 2.189602495935758, 1.161930730681465, 0.09648448186503668, -0.7969224855377391, -0.24697610859428135, 0.8785771945733821, 0.5448027331224652, 0.4738428322411336, 0.752487997229116, -0.29798499770150305, 0.38908845197218317, 0.2842337994172849, -0.9466067491887835, 0.8741154127754481, -0.2438787387354557, 0.5707960906353969, 0.8799305646522735, -0.10890136729732122, 0.5449373027176901, -0.7103073023856981, -0.03170175131944954, -0.4030339113628627, -0.7838444327118066, 0.6675191400483871, 2.087090942285086, 0.15865308115636845, -0.6077252636937005, 0.9037471778537397, -0.8490009799831795, 0.5940876092446967, 1.5055945569171336, -1.626219619802907, -0.28679139723588193, -0.5468958623697021, 0.01237422941568857, -0.16126328263717085, 0.44183831512874083, -0.14301484910863513, 1.3311401451685363, -1.6378651646295168, 0.38821336709576515, -0.1590859422319972, 0.16873918306258465, 0.8002417325303293, -0.052887886479940346], "modelview": [[0.9752589464187622, -0.04281593859195709, -0.21687963604927063, 88.519287109375], [0.07519356906414032, 0.9868167042732239, 0.1433131992816925, 68.72847747802734], [0.20788437128067017, -0.15607544779777527, 0.9656213521957397, 0.0], [0.0, 0.0, 0.0, 1.0]], "projection": [[0.012172573246061802, 0.0, 0.0, -1.0], [0.0, 0.01050835382193327, 0.0, -1.0], [0.0, 0.0, -1.0, 0.0], [0.0, 0.0, 0.0, 1.0]], "viewport": [0, 256, 221, -256]}
			}]
		}},

		{result: {
			images: [{
				original: "{% static 'img/beautyisdataful/examples/15_1.jpg' %}",
				results: {"indexs": [2866, 2861, 2830, 2852, 2862, 2842, 4133, 4130, 4126, 4122, 4109, 4105, 4101, 4093, 4088, 4074, 4076, 4055, 4043, 4014, 3998, 3968, 3929, 3888, 3871, 3837, 3783, 3754, 3738, 3702, 3701, 3687, 3653, 3636, 3620, 3606, 3593, 3578, 3556, 3569, 3547, 3546, 3432, 3424, 3423, 3415, 3412, 3411, 3406, 3402, 3401, 3398, 2675, 2699, 2697, 2695, 2703, 2672, 2666, 2681, 2665, 2904, 2910, 2922, 2936, 2966, 3011, 3111, 3125, 3137, 3147, 3161, 3170, 3285, 3332, 3368, 3379, 3383, 3384, 2868, 495, 1337, 2193, 1309, 2915, 2990, 3071, 3243, 3318, 3361, 114, 669, 1945, 2483, 1285, 765, 1334], "rating": 7.113365089932324, "facefeatures": [-1.3629214763641357, 0.24239909648895264, 0.2991562485694885, -0.577326774597168, -0.18601782619953156, 0.8031958341598511, 0.8536670207977295, -1.2229163646697998, -0.7650086283683777, -1.1800237894058228, -2.418389320373535, 0.8306311964988708, -1.309449315071106, -0.36966222524642944, -1.36251962184906, 0.5421648025512695, 1.8743218183517456, -1.222231388092041, -1.6363956928253174, -0.13938425481319427, -0.4248112440109253, 0.5088724493980408, 1.2432975769042969, -0.4777531325817108, 1.5060012340545654, -0.13840118050575256, -0.05828353762626648, -1.4659557342529297, 0.21325808763504028, -1.4918122291564941, 0.36886441707611084, 0.8067699074745178, -1.24502694606781, 1.3524556159973145, 0.20453321933746338, -0.6707255244255066, 0.28145235776901245, 0.14556504786014557, -0.0859583169221878, -0.4441467225551605, 1.1458452939987183, -1.124314785003662, -1.3893619775772095, 0.22088876366615295, 0.05684743821620941, -0.710286557674408, 0.5152350664138794, 0.0052020251750946045, -0.5567877292633057, -0.9808942675590515, -0.1632571518421173, 0.46561944484710693, 1.1645170450210571, 0.036987170577049255, 0.6368066668510437, 1.0938327312469482, -0.18154452741146088, -0.49543991684913635, -0.5508947372436523, 0.6602529287338257, -1.6327714920043945, -1.0658702850341797, 0.3990482985973358, -0.07536578178405762, -0.47325968742370605, -0.5049681067466736, -0.21380004286766052, -0.3633602559566498, -0.06815600395202637, 1.0845669507980347, 0.24238799512386322, -0.8680758476257324, 0.2661857604980469, 0.14873607456684113, -0.02507910132408142, -0.43456441164016724, -0.2187313288450241, 0.06646418571472168, 0.5887423753738403, 0.29749324917793274, -0.3518156111240387, 0.5398440957069397, 0.17469438910484314, 0.5807081460952759, -0.26715216040611267, -0.7228662967681885, 0.21410158276557922, 0.01273706927895546, 0.3588768243789673, 0.45591235160827637, 0.5866281986236572, 0.4040876626968384, 0.7191261649131775, -0.1900324672460556, 0.617317795753479, 0.4363527297973633, 0.038339853286743164, 0.3844242990016937, -0.3047693371772766], "new_facefeatures": [-1.683250931218031, 0.281247405255833, -0.3033130861969088, -1.1456648735401735, -0.2912547379407114, 1.164748888440476, 0.41538681185782134, -0.437924784495888, -0.9833073504571769, -3.0106088846294288, -2.7981908612762285, 0.2767652499960902, -0.5426087753464014, -0.09705243065801367, -1.454289874389534, 0.5463154230777961, 1.5385778346837442, -0.7292346786301596, -2.6682526145740244, -0.6248254819865082, -0.13606740947738524, 0.5305168359656857, 0.5239641106969878, -0.5833557406427601, 0.8165089771680417, -1.2230961611318074, -0.41353870224659406, -0.3464242858196965, -0.8593719887859246, -0.555958981362284, 0.1560123739841795, -0.3201711010538636, -1.5026128370767056, 0.7598572833944095, 0.2475640198520058, -1.0572899275767373, 0.5245905332830775, -0.3035388503167903, 0.42871029815028133, -0.856413827083979, 2.000162526433033, -1.1759766242639673, -1.159947542094324, -0.4702158055338155, 0.6387496253164588, -1.444321829518962, 0.8519236813604564, -0.83148765218335, -0.9022399875099625, -0.8440727246608267, -0.8288910871030759, 0.23884762376792754, 2.020624393758519, 0.36371395438465653, 0.47632451863665765, 0.9649816728672125, -0.6802024862228225, -1.174807317498873, -0.37728684939232904, 0.6133705559760843, -0.9859252194836703, -2.0677143317204174, -0.08574457700693879, -0.3379816082141969, 1.1584616524009343, -0.7094773013324571, 0.29847386014268334, -0.7185493583469398, -0.41242429676216597, 0.8974520737126875, 0.9239156818277946, -1.048394463857011, 0.14134382126319645, -0.7972917663746134, 0.13969350932714195, -0.48897764453847936, -1.3301777116468692, 0.03712031726124626, 1.0254040157473805, 1.2808360756527182, -1.0134249098556671, 0.2528508777541424, 0.45063190909286266, 0.1813648515109315, 0.2644348832247478, -0.20567176093835457, 1.131302734156095, 1.0512720565909792, 0.4475807624205039, 1.2635550854816946, -0.20696625053583512, 1.6490876356361595, 1.5724140047688382, -0.13503987663988543, 0.7041287581102034, 1.0585643288755018, 1.5086122048690032, 0.9114530627340431, -1.26679750957991], "modelview": [[0.968725860118866, 0.002474564127624035, -0.2481212168931961, 93.20438385009766], [-0.013720286078751087, 0.9989546537399292, -0.043604567646980286, 88.42277526855469], [0.24775393307209015, 0.04564516246318817, 0.967747151851654, 0.0], [0.0, 0.0, 0.0, 1.0]], "projection": [[0.012194239534437656, 0.0, 0.0, -1.0], [0.0, 0.009240946732461452, 0.0, -1.0], [0.0, 0.0, -1.0, 0.0], [0.0, 0.0, 0.0, 1.0]], "viewport": [0, 256, 194, -256]}
			}]
		}},

		{result: {
			images: [{
				original: "{% static 'img/beautyisdataful/examples/24_1.jpg' %}",
				results: {"indexs": [2861, 2841, 2824, 2830, 2852, 2862, 2842, 4130, 4126, 4122, 4109, 4105, 4101, 4088, 4076, 4065, 4055, 4043, 4032, 4014, 3998, 3968, 3929, 3888, 3871, 3837, 3783, 3754, 3725, 3673, 3655, 3623, 3599, 3573, 3550, 3532, 3531, 3488, 3480, 3473, 3460, 3456, 3446, 3443, 3436, 3432, 3424, 3423, 3411, 3406, 3402, 2675, 2699, 2697, 2686, 2685, 2683, 2695, 2703, 2672, 2681, 2901, 2904, 2910, 2922, 2936, 2966, 3003, 3011, 3125, 3137, 3147, 3161, 3285, 3332, 3368, 3379, 3383, 3384, 2866, 495, 1337, 2193, 1309, 2915, 2990, 3071, 3243, 3318, 3361, 114, 669, 1945, 2483, 1285, 765, 1334], "rating": 6.861645289254396, "facefeatures": [-0.7190003991127014, 0.09797564148902893, -1.2994115352630615, 0.03530888259410858, -1.1033399105072021, 0.9196697473526001, 1.1283596754074097, -2.0805392265319824, -1.1107711791992188, -1.5743379592895508, -1.5055798292160034, 0.8178651928901672, -1.7607636451721191, -0.7443916201591492, -3.24556303024292, 1.6806942224502563, 0.22895961999893188, -0.06416809558868408, -1.3910102844238281, 0.12386436015367508, 1.115853190422058, 0.523852527141571, 0.22293078899383545, -1.1924307346343994, 0.3308682441711426, -0.9128404259681702, -0.23936235904693604, -1.4537100791931152, -1.8143963813781738, -1.4179786443710327, 0.43387600779533386, -0.7430561780929565, -1.2210440635681152, 0.6029165387153625, -0.3489302396774292, -0.31645452976226807, 0.6121461987495422, 0.8729835748672485, -0.2008432298898697, -0.5837108492851257, -0.2854101061820984, -1.3019647598266602, -0.4512691795825958, -0.27211499214172363, -0.18329086899757385, -0.08240008354187012, -0.0069041624665260315, -0.2052403688430786, -0.17052017152309418, -1.1308422088623047, -1.4346826076507568, 1.1409721374511719, 0.633518636226654, -0.3998255133628845, 0.47254976630210876, 0.6803779602050781, 0.25481748580932617, 0.6842589974403381, -0.3800560235977173, 0.0950637012720108, -0.8118613958358765, -0.7213884592056274, 0.571679949760437, 0.8348981142044067, -0.36521783471107483, -0.3512878119945526, -0.6931724548339844, -0.02033880352973938, -0.08615213632583618, 0.6136935949325562, 0.46284550428390503, -0.007395923137664795, -0.5619708895683289, -0.5143335461616516, 0.15872541069984436, -0.16467076539993286, 0.08961080014705658, -0.38708892464637756, -0.3458317518234253, -0.1374843865633011, -0.24536514282226562, 0.5022438764572144, -0.1874171495437622, 0.027908973395824432, 0.10786547511816025, -0.5802603960037231, -0.22337117791175842, -0.1344774216413498, -0.07197907567024231, 0.7050586342811584, 0.651113748550415, 0.4542540907859802, 0.3798927962779999, -0.7626685500144958, 0.3808157444000244, 0.33555173873901367, -0.48846614360809326, 0.0951332151889801, 0.1513659656047821], "new_facefeatures": [-1.5655074696959732, 0.9750739108793688, -2.0036587789133207, -0.37034428380082224, -0.818869463596022, 1.3703506828207797, 1.268959365435246, -1.0127054831019529, -0.48132919700796745, -1.208027234687794, -0.9641605817177811, 0.2009691469581335, -1.0742746377804002, -1.498326837138115, -2.866586756876629, 0.9626770025433076, 1.4185527671975613, 0.8752741941468622, -1.3835023942904512, 0.2402814878176851, 0.6126155910470065, -0.5620745965007788, 0.666523516046778, -0.7305008838793414, 1.527322775690434, -0.5251798609720381, 0.17534777659091544, -0.7479418650139642, -2.11072570406316, -0.9857180820003143, 0.2464924975299893, -1.0906246883598094, -1.0739323488031816, 0.4311748006524236, -0.4166435982131125, -0.34089815791562433, -0.08878387531418831, 0.34101783209867337, 0.3351598758649297, -0.547204816638831, 0.9752191553494975, -0.5231401244284479, -0.7954942067708091, 0.9816544681046913, 0.2293388715140206, 0.046048987684994915, -0.8220869690818761, -0.2897752301572227, -0.8726593815852415, -0.35035363566338257, -1.1569107382019126, -0.48743591942859027, 1.9769241922281238, -1.3887475864521963, 1.6153720771066469, 0.9651961084401233, -0.014342587149751786, -0.5522119533604992, 0.19071922191307358, 1.0801746310312594, 0.04268902219164043, 0.01912680036577523, 1.1411249831015777, -0.6159657683362509, 0.31303238500476993, -0.08405303263709202, -0.689015568882016, 0.5648540586051898, -0.5813592106537355, 0.3123467041201754, 1.0913034090317824, -0.4915518606124835, 0.42950727727474836, -0.8061374813076423, -0.14155783999274832, -0.6942886126170948, -0.9624485507781656, 0.5587248403643588, 1.7205705320673597, 0.43215464618996785, -0.7607155712461815, 0.775166125396224, -0.7323399664986978, 0.5397259491993114, 1.5155345985661544, -1.71942454143294, 0.04904787237115124, -0.3224215883631429, 0.40305898074562746, -0.1313483157850956, 0.3316095918687799, 0.05400320750164924, 1.1695214702410384, -1.6680357866696849, 0.8691632523598934, 0.03544168527946455, -0.003954719521840986, 1.1978833275022172, -0.2786542336654118], "modelview": [[0.9712846279144287, -0.04700035974383354, -0.23323196172714233, 82.81367492675781], [0.037121113389730453, 0.9982250332832336, -0.046570662409067154, 87.18846893310547], [0.23500680923461914, 0.03657553717494011, 0.9713053107261658, 0.0], [0.0, 0.0, 0.0, 1.0]], "projection": [[0.013185176067054272, 0.0, 0.0, -1.0], [0.0, 0.009785872884094715, 0.0, -1.0], [0.0, 0.0, -1.0, 0.0], [0.0, 0.0, 0.0, 1.0]], "viewport": [0, 256, 190, -256]}
			}]
		}},

		{result: {
			images: [{
				original: "{% static 'img/beautyisdataful/examples/9_1.jpg' %}",
				results: {"indexs": [2866, 2861, 2841, 2824, 2830, 2852, 2862, 2842, 4133, 4130, 4126, 4122, 4119, 4114, 4109, 4105, 4101, 4093, 4088, 4074, 4076, 4065, 4055, 4043, 4014, 3998, 3968, 3929, 3888, 3871, 3837, 3783, 3754, 3725, 3673, 3625, 3582, 3520, 3512, 3494, 3480, 3473, 3460, 3456, 3446, 3443, 3436, 3432, 3424, 3423, 3411, 3407, 3406, 3402, 2675, 2699, 2697, 2686, 2674, 2667, 2659, 2652, 2901, 2904, 2910, 2922, 2936, 2951, 2966, 3003, 3011, 3083, 3111, 3125, 3131, 3137, 3147, 3161, 3170, 3177, 3194, 3214, 3228, 3285, 3332, 3368, 3379, 3383, 3384, 495, 1337, 2193, 1309, 2915, 2990, 3071, 3243, 3318, 3361, 114, 669, 1945, 2483, 1285, 765, 1334], "rating": 6.2469413694343565, "facefeatures": [-1.0721395015716553, -0.2686308026313782, -0.9267213344573975, -0.06617450714111328, 0.0513148307800293, 1.4820526838302612, 1.2807421684265137, -1.6642273664474487, 0.0571560263633728, -1.9634687900543213, -1.7870036363601685, -0.0986519455909729, 0.30953556299209595, 0.24191953241825104, -1.9607828855514526, 1.5416830778121948, 0.8210133910179138, 0.9267708659172058, 0.0241391658782959, 1.6291980743408203, -0.3790540099143982, -0.16874432563781738, -0.45255595445632935, -0.22913148999214172, 1.0688425302505493, -0.5822086930274963, -1.5449254512786865, -0.5101072788238525, -0.43657195568084717, -0.9823951721191406, 0.7872714996337891, -0.6855553984642029, -0.6128072142601013, 0.5305644273757935, 0.30898600816726685, -1.106358528137207, 0.6329238414764404, 0.036817774176597595, -0.5500183701515198, -0.02168327569961548, 0.7519505620002747, -0.39194679260253906, -0.033431053161621094, 0.3659030497074127, -0.3782110810279846, -0.04025498032569885, 0.043992429971694946, -0.5297077298164368, -0.34103259444236755, -1.0563693046569824, 0.040815770626068115, 0.1822132021188736, 0.5079565644264221, -0.2719593048095703, 0.2527097761631012, 0.19803069531917572, -0.061301395297050476, -0.1736639142036438, 0.3042070269584656, 0.18907639384269714, 0.04031834006309509, -0.5486733317375183, 0.39127907156944275, 0.5864100456237793, 0.41367360949516296, -0.5212738513946533, -0.21104782819747925, 0.4181315302848816, -0.23221997916698456, 0.6278620362281799, -0.18212884664535522, 0.21475261449813843, -0.011298105120658875, -0.16761401295661926, -0.3427944779396057, 0.16452768445014954, -0.2243627905845642, 0.229018896818161, -0.08425438404083252, 0.11205098032951355, -0.6940051913261414, 0.21969185769557953, 0.2703719139099121, -0.4978548288345337, -0.02225250005722046, -0.49754706025123596, -0.01802695170044899, 0.08948560059070587, -0.3609027862548828, 0.19355493783950806, 0.025118887424468994, 0.2817882001399994, 0.4556586444377899, -0.057983338832855225, 0.006345316767692566, 0.01657882332801819, -0.001324683427810669, 0.2877141535282135, -0.012771829962730408], "new_facefeatures": [-1.61972569030576, 0.1840552372249721, -0.9160790767577784, -0.8541330642775636, -0.164394783786897, 1.2432885013880792, 0.3276095296349748, -0.23233465390072353, -0.40957538802925947, -2.970135887857526, -2.352350849841754, -0.22892159475573207, -0.0920936627625103, 0.13912165228241652, -1.858803274668842, 0.8327542968750562, 0.7952703551820957, 0.2293434032799947, -2.217893470502124, 0.09966620546097915, -0.15021535883069054, 0.18032136708847515, -0.1918317195473111, -0.5597694117504004, 0.7407135186621352, -1.4931047291243578, -1.1128319833363454, 0.09461707170029908, -1.1986575213914628, -0.34000734002638083, -0.036952950448774946, -0.580483826138049, -1.2228190692769094, 0.4459976613685863, 0.30101332993613406, -1.1467356091292238, 0.7282504315159327, -0.3122819907068, 0.5582309113527476, -0.6186005855808056, 1.7518674536075127, -0.619031095870547, -0.5624177866681409, -0.525136749538935, 0.32023659099043117, -1.0408136922484226, 0.37185367084469945, -0.690099222605218, -0.7461511642570455, -0.738202465099583, -0.9006268753567324, 0.1743963241659376, 1.8214066812988343, 0.38618679638232867, 0.6098918291089697, 0.3269346477335126, -0.4477388938894448, -0.9914665658238991, -0.036092822462208636, 0.35641580436493714, -0.06488217887416152, -1.9466737315906408, -0.23887421637812958, -0.11141656499230414, 1.3782329847948307, -0.7469159032781768, -0.0010746802866792443, -0.5482092857408911, -0.33908915592104794, 0.7469887551328218, 0.8375858814366566, -0.41062072063884275, -0.17762874447458282, -0.6847218757779749, 0.017484674782823822, -0.31520883220246243, -1.2735357226382693, 0.28387743977129654, 0.866396459504674, 1.1725062819777667, -1.253455232419545, 0.20116889553034245, 0.4193422739166597, -0.015971825778967996, 0.4234143533450813, -0.10138927827565639, 1.0258383820703716, 1.0471298645630949, 0.19785312040589073, 1.278163464382058, -0.45770868585976016, 1.5713008340519796, 1.689250291009349, -0.015236946806021098, 0.5304081133396609, 0.6641761179446333, 1.6256682766737853, 0.8394251125173229, -1.322900995104449], "modelview": [[0.994286060333252, 0.03285243362188339, 0.10156717896461487, 88.41012573242188], [-0.046401090919971466, 0.9898867011070251, 0.13405683636665344, 64.79131317138672], [-0.09613591432571411, -0.13800367712974548, 0.9857549667358398, 0.0], [0.0, 0.0, 0.0, 1.0]], "projection": [[0.010387851856648922, 0.0, 0.0, -1.0], [0.0, 0.009738611057400703, 0.0, -1.0], [0.0, 0.0, -1.0, 0.0], [0.0, 0.0, 0.0, 1.0]], "viewport": [0, 256, 240, -256]}
			}]
		}},

		{result: {
			images: [{
				original: "{% static 'img/beautyisdataful/examples/34_1.jpg' %}",
				results: {"indexs": [2830, 2852, 2862, 2842, 4133, 4130, 4126, 4122, 4109, 4105, 4101, 4093, 4088, 4074, 4076, 4065, 4055, 4043, 4032, 4014, 3998, 3968, 3929, 3888, 3871, 3837, 3783, 3754, 3725, 3673, 3625, 3582, 3552, 3520, 3512, 3494, 3480, 3473, 3460, 3456, 3446, 3443, 3436, 3432, 3424, 3423, 3411, 3407, 3406, 3402, 2675, 2699, 2697, 2686, 2674, 2667, 2659, 2901, 2904, 2910, 2922, 2936, 2951, 2966, 3011, 3083, 3107, 3111, 3125, 3131, 3137, 3147, 3161, 3170, 3177, 3214, 3285, 3332, 3368, 3379, 3383, 3384, 2866, 2861, 2841, 2824, 495, 1337, 2193, 1309, 2915, 2990, 3071, 3243, 3318, 3361, 114, 669, 1945, 2483, 1285, 765, 1334], "rating": 7.237687626826796, "facefeatures": [-0.8499625325202942, -0.1372072398662567, -1.465738296508789, 0.04607635736465454, -0.36656689643859863, 0.8095846176147461, 1.2445740699768066, -1.4902286529541016, 0.07536238431930542, -1.9383724927902222, -1.8633309602737427, -0.4974168837070465, -0.22079423069953918, 0.12443949282169342, -1.4319050312042236, 1.1262640953063965, 1.6950912475585938, 0.07246564328670502, -0.17755162715911865, -0.15517140924930573, 0.5294191837310791, -0.20225496590137482, 1.4056603908538818, 0.5754116773605347, 1.5192015171051025, -1.035841703414917, -0.6921536326408386, -0.19051440060138702, -0.4857945442199707, -1.2124000787734985, 0.14707273244857788, -0.2265634685754776, -0.7424274682998657, 1.0004491806030273, 0.45027828216552734, -1.1418418884277344, 0.3260616958141327, 0.05840739607810974, 0.586499035358429, -1.2575178146362305, 0.25640764832496643, -1.0604424476623535, -0.20796847343444824, 0.5679839253425598, -0.44974058866500854, 0.008267596364021301, -0.3439313769340515, 0.5631688237190247, -0.6825586557388306, -0.2595359683036804, -0.9810590744018555, 0.030882611870765686, 1.450873613357544, -0.2953578233718872, 1.099231243133545, 1.050020694732666, 0.235414519906044, -0.15287575125694275, -0.1666574776172638, -0.13974851369857788, -0.6266689300537109, 0.045287489891052246, 0.45280885696411133, 0.8968802094459534, -0.41953545808792114, -0.16337335109710693, -0.4552018642425537, 0.37547677755355835, -0.004252448678016663, 1.0641546249389648, 0.22503407299518585, 0.5244567394256592, -0.3027306795120239, 0.0807923823595047, -0.30191242694854736, 0.2900141775608063, -0.133210226893425, -0.7388547658920288, 0.38498425483703613, 0.09109698981046677, -0.6573057174682617, 0.45667487382888794, 0.3851802945137024, -0.4171869158744812, 0.24037328362464905, -0.39607852697372437, -0.16367530822753906, 0.14384493231773376, -0.18181541562080383, 0.41053175926208496, 0.24843519926071167, 0.5255586504936218, 0.9452396035194397, -0.43988320231437683, 0.011640332639217377, 0.09137335419654846, -0.36231958866119385, 0.3452531099319458, 0.3045661747455597], "new_facefeatures": [-1.360063008910206, 0.8751770391081668, -1.9066707989584832, -0.806637929471548, -0.6249056432295049, 1.2711652285155957, 1.5131028636434187, -1.1706019980275264, -0.2622079979689557, -1.5129852510878552, -1.1139607925226167, -0.169568468175884, -1.070140071310296, -0.7650927649258024, -2.3367943414873644, 0.389726196440855, 1.7498689416588675, 0.4697291013009922, -1.0036169888519526, 0.1953092930803179, 0.33706866670777613, -0.8442820300410401, 0.6849114547606605, -0.7308593350393127, 1.310733243120843, -0.4141412381218531, -0.3487572078801963, -0.4103646679839244, -1.3192728930953188, -0.5750851576698128, 0.20037820070266757, -1.156517437562288, -1.0603913988078453, -0.03909762714531159, 0.04209486419290856, -0.263330558781811, 0.04762282010460969, 0.0339567913576478, 0.8167867954186251, -0.5831957589752623, 0.8963787235588884, -0.5613647476927971, -0.5139337147424563, 0.9607733563568651, 0.29258088552975986, -0.07460877806075514, -0.6355651389009392, 0.27686490007607983, -0.6313843176712586, -0.29313527866836503, -1.5761657963512785, -0.5399291505404147, 2.1308290326822763, -1.483168036715281, 2.0581706511713898, 1.11585796576475, 0.08339853809831335, -0.7419578397564421, -0.1276631732490288, 0.8852485693065606, 0.4499816889166621, 0.3417714098526388, 0.8346096898092495, -0.3788215738839604, 0.41600557731214977, 0.19688583472871424, -0.8662794298203398, 0.8654753010196946, -0.33377754723837716, 0.5262127248764898, 0.9029393715586193, -0.16958609332470972, 0.5645871826718024, -0.7343962996353476, -0.005048056427470565, -0.45067310111113, -0.8495817482752326, 0.6996516230540011, 2.0718314227731915, 0.18473438414533166, -0.5998119161527928, 0.9254568689481265, -0.827767328571105, 0.5812644582240333, 1.5303756154931598, -1.678970643634879, -0.24628124943726182, -0.5482615834218472, 0.07069734644893223, -0.14627331682581815, 0.40126477996258336, -0.13008080088011145, 1.2895612657276985, -1.7039639211542337, 0.5211420696922899, -0.11269932653427657, 0.15094628923059736, 0.8743639174264802, -0.15827154316186026], "modelview": [[0.9831095337867737, -0.16440650820732117, -0.08041243255138397, 91.97933197021484], [0.17409059405326843, 0.9756057858467102, 0.1337377279996872, 70.35273742675781], [0.05646347999572754, -0.14547787606716156, 0.9877489805221558, 0.0], [0.0, 0.0, 0.0, 1.0]], "projection": [[0.011856921017169952, 0.0, 0.0, -1.0], [0.0, 0.008846374228596687, 0.0, -1.0], [0.0, 0.0, -1.0, 0.0], [0.0, 0.0, 0.0, 1.0]], "viewport": [0, 256, 191, -256]}
			}]
		}},

		{result: {
			images: [{
				original: "{% static 'img/beautyisdataful/examples/33_1.jpg' %}",
				results: {"indexs": [2861, 2851, 2830, 2852, 2862, 2842, 4133, 4130, 4126, 4122, 4109, 4105, 4101, 4093, 4088, 4074, 4076, 4065, 4055, 4043, 4014, 3998, 3968, 3929, 3888, 3871, 3837, 3783, 3754, 3725, 3739, 3738, 3703, 3701, 3687, 3686, 3636, 3606, 3618, 3590, 3567, 3546, 3545, 3421, 3412, 3411, 3406, 3409, 3402, 3400, 3399, 44, 2743, 2727, 40, 19, 53, 26, 22, 9, 17, 2741, 2732, 2723, 2916, 2904, 2910, 2918, 2922, 2936, 2951, 2966, 3003, 3011, 3111, 3125, 3137, 3147, 3161, 3170, 3177, 3285, 3332, 3368, 3379, 3383, 3384, 2866, 495, 1337, 2193, 1309, 2915, 2990, 3071, 3243, 3318, 3361, 114, 669, 1945, 2483, 1285, 765, 1334], "rating": 6.2115719362310715, "facefeatures": [-1.665358543395996, -0.6497541666030884, -0.088592529296875, 0.4839703440666199, -0.4937087297439575, 0.7840006351470947, 0.7961841225624084, -0.3705945312976837, -0.9045722484588623, -1.0598602294921875, -2.282572031021118, -0.7755147218704224, -1.2518327236175537, -1.2622829675674438, -2.075697422027588, 0.5520475506782532, 0.08985698223114014, 0.3004809021949768, -0.6501674056053162, -0.4319193959236145, -0.174012690782547, -0.31927287578582764, 0.29454711079597473, -0.03576907142996788, 1.5511767864227295, -0.36228328943252563, -1.0238275527954102, -1.083243489265442, -1.3708608150482178, -1.7541072368621826, -0.3951112627983093, 0.4826003313064575, -1.5665169954299927, 1.4707176685333252, 0.23292499780654907, -1.0054900646209717, 0.9475352168083191, 0.4283750057220459, 0.17244412004947662, -1.4293670654296875, 0.058928634971380234, -0.84930020570755, -0.8761521577835083, 0.640228271484375, -0.7818037271499634, 0.2111130952835083, -0.010978922247886658, 0.8130781054496765, -0.520683228969574, -0.18564262986183167, -0.45348477363586426, -0.1879141628742218, 1.5924534797668457, 0.5786738395690918, 0.9189490675926208, 0.5393205285072327, -0.04572795331478119, -0.2318413257598877, -0.13372012972831726, -0.17504701018333435, -1.1897447109222412, -0.9421783685684204, 0.23336265981197357, 0.023652464151382446, -0.5720646381378174, -1.3404080867767334, -0.8162316679954529, 0.1226426362991333, 0.261421799659729, 1.020317554473877, 0.3194187879562378, 0.0968623086810112, -0.031770579516887665, 0.09078757464885712, -0.11412236839532852, -0.551796555519104, -0.3047943711280823, 0.2567596733570099, 1.2897130250930786, 0.4102602005004883, -1.1985069513320923, 0.4655999541282654, 0.014732599258422852, -0.08849368989467621, 0.02792348898947239, -0.15303820371627808, 0.24613633751869202, 0.29374057054519653, 0.3041260838508606, 0.2841653823852539, 0.09696295112371445, 0.44130468368530273, 0.5892818570137024, -0.5277617573738098, 0.36195969581604004, 0.4169922471046448, -0.17330516874790192, 0.5089486837387085, -0.43933531641960144], "new_facefeatures": [-2.025633929830754, 0.10035806629221783, -0.40476204133833477, -0.8211054734768501, -0.39291340044818407, 1.3346983756435864, 0.480066224092099, 0.19550053293976744, -0.9339062871727931, -3.011028655072309, -2.6667332102175476, -0.8001624177244674, -0.19567150468674122, -0.801186707913999, -1.7882559941350245, 0.6651745856809851, 0.29674921065291937, 0.30187863776881546, -2.045316465419533, -0.8146646240065664, -0.22902489866891748, 0.07222465220959123, -0.17258373119087822, -0.3688770219904329, 0.9056618035078627, -1.7578068067623045, -1.0431205650763293, -0.359618396350766, -1.5885404808736305, -0.9346632793730656, -0.274159663224859, -0.3409043672921416, -1.6677389629508623, 0.9559741747473814, 0.15306609243603367, -1.2448821754957098, 0.8744053405619393, -0.00492279440438724, 0.5845338887421577, -1.508664694366971, 1.5405126007860033, -1.0659636986832215, -0.9254555778998446, -0.03805987734526868, -0.0707172322456937, -0.8542481775175538, 0.4508006893047066, -0.38409543799164614, -0.8465029725582734, -0.21110481071820114, -0.9697321909878912, -0.28136767638894505, 2.614158825457408, 0.7156620481482833, 0.8816890105863604, 0.7077443112751182, -0.5237161360533918, -1.016803509895556, -0.046625492806772965, 0.053960729587439776, -0.7131816477945513, -1.9759052546811555, -0.17503853108831416, -0.3396633871733582, 1.1811772275871593, -1.244246418519248, -0.21467277698756365, -0.6879199707512418, -0.16696941994958875, 0.8497770167810785, 0.9646390115335842, -0.4402944283065055, -0.018825311248893393, -0.7527773643691075, 0.10017025580184093, -0.8756549943037016, -1.469199269138624, 0.11597703954563214, 1.3499634706315813, 1.3926254251223003, -1.4308700886656989, 0.09504082972235492, 0.37613165732056747, -0.27892208392124584, 0.513859662626868, 0.19436378095129778, 1.1819279741886333, 1.178990412479397, 0.4674491531506596, 1.2981358750286656, -0.5284508977584099, 1.6253322893491735, 1.613488746209855, -0.21205705329674748, 0.6775189274901167, 0.9261039181099601, 1.5225787461687843, 1.0489811206545654, -1.3475223686459958], "modelview": [[0.9155147075653076, -0.048982832580804825, -0.39929133653640747, 99.02254486083984], [0.026714589446783066, 0.9977710843086243, -0.06114848703145981, 81.41976928710938], [0.40139657258987427, 0.04531543701887131, 0.9147826433181763, 0.0], [0.0, 0.0, 0.0, 1.0]], "projection": [[0.01224023662507534, 0.0, 0.0, -1.0], [0.0, 0.009419243782758713, 0.0, -1.0], [0.0, 0.0, -1.0, 0.0], [0.0, 0.0, 0.0, 1.0]], "viewport": [0, 256, 197, -256]}
			}]
		}},
    ];

    function checkAndDisplayResults(data, retryCount) {
        if (retryCount === undefined) {
            retryCount = 0;
        }

        $("#resultsmodal").modal("show");
        if (data.hasOwnProperty("result")){
            $('#originalImages').html("");
            $('#improvedImages').html("");
            allRatings = [];
//        data.result.images.sort(function(a, b){return b.rating-a.rating});
//            for (var i=0; i<data.result.images.length; i++)
                var i = 0;
                var imageData = data.result.images[i].results;

                var modelview = imageData.modelview;
                var projection = imageData.projection;
                var viewport = imageData.viewport;
                var indexs = imageData.indexs;
                var facefeatures = imageData.facefeatures;
                var new_facefeatures = imageData.new_facefeatures;

                setRenderParams(modelview, projection, viewport, indexs, facefeatures, new_facefeatures);

                //create original image
                var orig = $("<img>");
                orig.attr("src", resizedImages[i].dataUrl);
                orig.addClass("img-responsive");
                orig.appendTo('#originalImages');

                //add the ratings to the array
                allRatings.push(imageData.rating);
//            }

            //set the rating
            $("#rating").html(parseFloat(allRatings[0]).toFixed(2));

            $("#resultswaiting").hide();
            $("#resultserror").hide();
            $("#resultssucessful").show();
        }else {
            displayWaitingModal();
            if (retryCount < 10) {
                setTimeout(function () {
                    $.ajax({
                        type: "GET",
                        url: "{% url 'api_GetResults' %}",
                        cache: false,
                        data: {
                            taskId: data.taskId,
                            type: "1"
                        },
                        success: function (data) {
                            if (data.status == "FAILURE") {
                                displayErrorModal(data.error);
                            } else {
                                checkAndDisplayResults(data, retryCount + 1);
                            }
                        },
                        error: function (data) {
                            displayErrorModal(data.statusText +"\n"+data.responseText.split("\n\n")[0]);
                        }
                    });
                }, 500 * (retryCount+1));
            } else {
                displayErrorModal("We were waiting too long, request timed out");
            }
        }
    }

    function displayWaitingModal(message) {
        $("#resultsmodal").modal("show");
        $("#resultswaiting").show();
        $("#resultserror").hide();
        $("#resultssucessful").hide();
        $("#resultserrorreason").html(message);
    }
    function displayErrorModal(message) {
        $("#resultsmodal").modal("show");
        $("#resultswaiting").hide();
        $("#resultserror").show();
        $("#resultssucessful").hide();
        $("#resultserrorreason").html(message);
    }

    function waitThenSubmitImages(imageselect) {
        if (resizedImages.length == imageselect.files.length) {
            var data = new FormData($("#uploadform")[0]);

            for (var i=0; i<resizedImages.length; i++){
                if (browser.name.includes("Edge") || browser.name.includes("IE")) {
                    data.append("images", dataURLToBlob(resizedImages[i].dataUrl));
                } else {
                    var resizedImage = new File([dataURLToBlob(resizedImages[i].dataUrl)], resizedImages[i].filename);
                    data.append("images", resizedImage);
                }
            }
            displayWaitingModal();

            var i = 0;
            PCAModelInit("{% static 'model/bfm_small.msg' %}", resizedImages[i].dataUrl);

            $.ajax({
                url: "{% url 'upload' %}",
                data: data,
                cache: false,
                contentType: false,
                processData: false,
                type: 'POST',
                success: function(data){
                    checkAndDisplayResults(data);
                },
                error: function(data) {
                    alert("There was an error uploading images");
                }
            });

            //clear imageselect
            imageselect.value = "";
        }
    }

    function dataURLToBlob(dataURL) {
        var BASE64_MARKER = ';base64,';
        if (dataURL.indexOf(BASE64_MARKER) == -1) {
            var parts = dataURL.split(',');
            var contentType = parts[0].split(':')[1];
            var raw = parts[1];

            return new Blob([raw], {type: contentType});
        }

        var parts = dataURL.split(BASE64_MARKER);
        var contentType = parts[0].split(':')[1];
        var raw = window.atob(parts[1]);
        var rawLength = raw.length;

        var uInt8Array = new Uint8Array(rawLength);

        for (var i = 0; i < rawLength; ++i) {
            uInt8Array[i] = raw.charCodeAt(i);
        }

        return new Blob([uInt8Array], {type: contentType});
    }

    function correctImagesAndUpload(imageselect) {
        for (var i = 0; i < imageselect.files.length; i++) {
            var file = imageselect.files[i];

            // Ensure it's an image
            if (file.type.match(/image.*/)) {

                //ensure image is correct orientation and max size, handling safaris weird behavior
                if (browser.name.includes("Safari")) {
                    canvasResize(file, {
                        width: 512,
                        height: 0,
                        crop: false,
                        quality: 80,
                        callback: function(data, width, height) {
                            resizedImages.push({"filename":file.name, "dataUrl":data});
                            waitThenSubmitImages(imageselect);
                        }
                    });

                } else {
                    loadImage(
                        file,
                        function (canvas) {
                            var dataUrl = canvas.toDataURL('image/jpeg');

                            resizedImages.push({"filename":file.name, "dataUrl":dataUrl});

                            waitThenSubmitImages(imageselect);
                        },
                        {
                            maxWidth: 512,
                            maxHeight: 512,
                            orientation: true,
                            canvas: true
                        }
                    );
                }
            } else {
                displayErrorModal("The file you uploaded is not an image");
                return;
            }
        }
    }

    var resizedImages = [];
    $(function() {
        $('#imageselect_F').change(function(event) {
            if (!browser.name.includes("IE")) {
                resizedImages = [];
            }
            $("#uploadform > input[name='gender']").val("F");
            correctImagesAndUpload(event.target);
        });
        $('#imageselect_M').change(function(event) {
            if (!browser.name.includes("IE")) {
                resizedImages = [];
            }
            $("#uploadform > input[name='gender']").val("M");
            correctImagesAndUpload(event.target);
        });

        $("#examplebtn").click(function(event) {
            var i = $("#example_carousel > ul > li.active").index();
            var exampleData = examples[i];
            resizedImages = [{dataUrl:exampleData.result.images[0].original}];
            PCAModelInit("{% static 'model/bfm_small.msg' %}", resizedImages[0].dataUrl);
            checkAndDisplayResults(exampleData);
        });

        var midI = parseInt(examples.length / 2);
        for (var i=0; i<examples.length; i++) {
            var exampleLi = $("<li>");
            var exampleIm = new Image();
            exampleIm.onload = function (imageEvent) {
                slideToNextActive(0);
            };
            exampleIm.src = examples[i].result.images[0].original;
            if(i==midI) {
                exampleLi.addClass("active");
            }
            exampleLi.append(exampleIm);
            $("#example_carousel > ul").append(exampleLi);
        }
        slideToNextActive(0);
    });
</script>
{% endblock %}

{% block content_block %}
<div class="row center-text">
    <h1 class="title">Objctify Me</h1>
</div>
<div class="row center-text">
    <h4>Use Deep Learning to rate your attractiveness and then tweak the photo to make it better!*</h4>
</div>

<div class="row" style="margin-top: 30px;">
    <p>Try it out on our example set below or upload your own:</p>
    <div id="example_carousel">
        <ul>
        </ul>
        <a class="left carousel-control" role="button">
            <span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>
            <span class="sr-only">Previous</span>
        </a>
        <a class="right carousel-control" role="button">
            <span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span>
            <span class="sr-only">Next</span>
        </a>
    </div>
</div>
<div class="row">
    <label id="examplebtn" class="btn btn-default col-xs-12 col-sm-6 col-md-4 col-sm-offset-3 col-md-offset-4">
        Use example photo
        <span class="glyphicon glyphicon-arrow-up" aria-hidden="true" style="margin-left: 6px;"></span>
    </label>
</div>

<div class="row center-text" style="margin-top:20px;">
    <p>Upload your own (your images will not be made public):</p>
</div>

<div class="row">
    <label class="btn btn-info btn-file col-xs-6 col-sm-4 col-md-3 col-sm-offset-1 col-md-offset-2 textwrap">
        Female
        <span class="glyphicon glyphicon-camera" aria-hidden="true" style="margin-left: 6px;"></span>
        <input id="imageselect_F" class="btn" type="file" accept="image/*" style="display: none;">
    </label>
    <label class="btn btn-primary btn-file col-xs-6 col-sm-4 col-md-3 col-sm-offset-2 col-md-offset-2 textwrap">
        Male
        <span class="glyphicon glyphicon-camera" aria-hidden="true" style="margin-left: 6px;"></span>
        <input id="imageselect_M" class="btn" type="file" accept="image/*" style="display: none;">
    </label>
    <form id="uploadform" action="{% url 'upload' %}" method="post" enctype="multipart/form-data">
        <input type="hidden" name="type" value="1">
        <input type="hidden" name="gender" value="F">
    </form>
</div>

<div class="row" style="margin-top:40px;">
    <p>*Disclaimer: Objctify.Me is trained on data gathered from Reddit's /r/RateMe (see <a href="{% url 'about' %}">How it works</a>), and probably suffers from huge cultural bias. Don't take the results seriously.
        <br>
    Uploaded data may be stored for caching and processing, but will never be shared with others.</p>
</div>
{% endblock %}

{% block end_body_block %}
<div id="resultsmodal" class="modal fade" tabindex="-1" role="dialog">
    <div class="modal-dialog modal-auto" role="document">
        <div id="resultswaiting" class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                <h4 class="modal-title">Waiting:</h4>
            </div>
            <div class="modal-body">
                <p>Hold tight while we process your image.</p>
            </div>
        </div>
        <div id="resultserror" class="modal-content" style="display:none;">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                <h4 class="modal-title">Error:</h4>
            </div>
            <div class="modal-body">
                <h2>Sorry!</h2>
                <p>There has been an error processing the image you uploaded:</p>
                <p id="resultserrorreason">No Reason Given</p>
            </div>
        </div>
        <div id="resultssucessful" class="modal-content" style="display:none;">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                <h4 class="modal-title">Results:</h4>
            </div>
            <div class="modal-body">
                <div class="row">
                    <div class="col-md-8" style="max-width: 600px;">
                        <div class="row">
                            <div class="col-xs-12">
                                <p>Our algorithm rates you:<span id="rating" style="padding-left:10px; font-size: 50px; font-weight: bold;">1</span><br>
                                Below you can see your image and a 3D reconstruction of your face.<br>You can use the sliders to the right to morph your face, or try out our AI suggested tweaks.</p>
                            </div>
                        </div>
                        <canvas id="warpCanvas" class="img-responsive"></canvas>
                    </div>
                    <div class="col-md-4" style="width: auto; max-width: 530px;">
                        <button id="default" type="button" class="btn btn-warning">Reset to original</button>
                        <div class="checkbox">
                            <label><input type="checkbox" id="suggested" value="">Use AI suggested settings</label>
                        </div>
                        <div class="form-group form-group-lg">
                            <label class="control-label" for="coeffGender">Gender:</label>
                            <input type="range" id="coeffGender" value="0" min="-5" max="5" step="0.1">
                        </div>

                        <div class="form-group form-group-lg">
                            <label class="control-label" for="coeffAge">Age:</label>
                            <input type="range" id="coeffAge" value="0" min="-5" max="5" step="0.1">
                        </div>

                        <div class="form-group form-group-lg">
                            <label class="control-label" for="coeffWeight">Weight:</label>
                            <input type="range" id="coeffWeight" value="0" min="-5" max="5" step="0.1">
                        </div>

                        <div class="form-group form-group-lg">
                            <label class="control-label" for="coeffHeight">Height:</label>
                            <input type="range" id="coeffHeight" value="0" min="-5" max="5" step="0.1">
                        </div>
{#                        <div class="form-group form-group-lg">#}
{#                            <label class="control-label" for="showlandmarks">Show Landmarks:</label>#}
{#                            <input type="checkbox" id="showlandmarks">#}
{#                        </div>#}
{#                        <div class="form-group form-group-lg">#}
{#                            <label class="control-label" for="showgrid">Show Grid:</label>#}
{#                            <input type="checkbox" id="showgrid">#}
{#                        </div>#}
                        <div id="3dcanvas" style="width:500px; height:500px"></div>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
            </div>
        </div>
    </div>
</div>
{% endblock %}